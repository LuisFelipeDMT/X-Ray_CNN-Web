{% load static %}
{% load icon %}
<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="{% static 'home/main.css' %}">
    {% if title %}
        <title>Iteratec - {{ title }}</title>
    {% else %}
        <title>Iteratec</title>
    {% endif %}

    <script>
      function getFileNameWithExt(event) {
        if (!event || !event.target || !event.target.files || event.target.files.length === 0) {
          return;
        }

        const name = event.target.files[0].name;
        const lastDot = name.lastIndexOf('.');
        const fileName = name.substring(0, lastDot);
        const ext = name.substring(lastDot + 1);
        
        console.log(fileName)
        console.log(ext)
        }

        function readURL(input) {
          var viewwindow=document.getElementsByClassName("subimage")[0];
          var approved=document.getElementsByClassName("btn btn-outline-success approved")[0];
          var rejected=document.getElementsByClassName("btn btn-danger rejected")[0];
          var beforeimgtxt=document.getElementsByClassName("beforeimg")
          var afterimgtxt=document.getElementsByClassName("afterimg")
          approved.classList.remove('d-none');
          rejected.classList.remove('d-none');
          if (input.files && input.files[0]) {
          var reader = new FileReader();
          reader.onload = function (e) {
            $('#subimage')
              .attr('src', e.target.result)
          };
          viewwindow.classList.remove('d-none')
          reader.readAsDataURL(input.files[0]);
          var imgselection=document.getElementById("uploadbutton")
          imgselection.classList.add('d-none');
          }
          for(var i=0;i<beforeimgtxt.length;i++)
          {
              beforeimgtxt[i].classList.add('d-none')
          }  
          for(var i=0;i<afterimgtxt.length;i++)
          {
              afterimgtxt[i].classList.remove('d-none')
          }  
        }
    </script>
    <script src="https://unpkg.com/feather-icons"></script>
  </head>
    
  <body>
    <header class="site-header">
      <nav class="navbar navbar-expand-md navbar-light fixed-top">
        <div class="container-fluid">
          <img id="logo" src="{% static 'images/Iteratec_Sob_Arredondado_Curto_sem_background.png' %}" alt="logo" class="logo" height="80px">
          <div class="navbar-header">
            <button class="navbar-toggler bg-light" type="button" data-toggle="collapse" data-target="#navbarToggle" aria-controls="navbarToggle" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
          </div>
          <div class="collapse navbar-collapse" id="navbarToggle">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class= "link" href="{% url 'home-home' %}">Pagina Inicial<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="link" href="{% url 'home-about' %}">Sobre<span class="sr-only">(current)</span></a>
              </li>
            </ul>
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="btnLog" href="#">Login<span class="sr-only">(current)</span></a>
              </li>
              <li class="nav-item">
                <a class="btnReg" href="#">Register<span class="sr-only">(current)</span></a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
<div class="image">
    <h1 class="beforeimg">Submeta um Raio-X de Torax para avalia√ß√£o!</h1>
    <h1 class="afterimg d-none">√ìtima imagem, agora √© s√≥ clicar no bot√£o de aprova√ß√£o para enviar! üòÅ</h1>
    <h1 class="afterapi d-none">Sucesso, sua imagem foi processada! üòÅ</h1>
    <button class="btn btn-outline-success approved d-none" title="Aprovado"><i data-feather="check"></i></button>
    <button class="btn btn-danger rejected d-none" title="Rejeitado"><i data-feather="slash"></i></button>
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      <p><label for="inputfile" class="custom-inputfile" id="uploadbutton" name="uploadbutton">
        <i class ="inputform" data-feather="upload"></i> Enviar imagem
      </label>
      <input id='inputfile' type='file' name='inputfile' accept="image/png, image/jpeg" onchange="readURL(this);"/>
    </form>
    </p>
</div>
<div class="container">
  <img class="subimage d-none" id="subimage" src="#"></img>
</div>
<h1 class="beforeimg">Caso prefira, tire uma foto com a c√¢mera de seu dispositivo!</h1>
<h1 class="afterimg d-none">Verifique a centraliza√ß√£o da foto e a qualidade da mesma üñºÔ∏è </h1>
<h1 class="afterapi d-none"></h1>
<button class="btn btn-danger play" title="Play"><i data-feather="camera"></i></button>
<p class="beforeimg" >Caso tenha rejeitado o uso da c√¢mera ou queira usar uma c√¢mera diferente do seu dispositivo, por favor, abra e feche o site novamente.</p>
 <div class="display-cover">
  <video autoplay></video>
  <canvas class="d-none"></canvas>
  <div class="controls">
      <button class="btn btn-info pause d-none" title="Pause"><i data-feather="camera"></i></button>
      <button class="btn btn-outline-success aprovado d-none" title="Aprovado"><i data-feather="check"></i></button>
      <button class="btn btn-danger rejeitado d-none" title="Rejeitado"><i data-feather="slash"></i></button>
  </div>
  <div class="video-options d-none">
    <select title="customSelector" id="" class="custom-select">
        <option value="">Select camera</option>
    </select>
</div>

</div>
    <script>
      feather.replace()
    </script>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="{% static 'home/scripts.js' %}"></script>
  </body>

</html>


